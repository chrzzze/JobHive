<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Account | JobHive</title>
  <link rel="stylesheet" href="cssforalladmin.css">
  <link rel="stylesheet" href="adminmanagedata.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
  <div class="container">
    <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <img src="jobhive logo.png" alt="JobHive Logo">
            </div>
            <div class="pic">
                <img src="https://static.vecteezy.com/system/resources/thumbnails/035/857/753/small/people-face-avatar-icon-cartoon-character-png.png" alt="Profile Picture">
                <h2>School IT Head Name</h2>
                <p>Administrator</p>
            </div>

            <nav class="menu">
                <a href="admindashboard.html" class="active">Account</a>
                <a href="studentlist.html">Students List</a>
                <a href="companylist.html">Company List</a>
                <a href="companyapplication.html">Company Application</a>
            </nav>
            <nav class="menu">
                <a href="settingsadmin.html#settings">Settings</a>
                <a href="index.html">Log out</a>
            </nav>
        </aside>
    <!-- Main Content -->
    <main class="dashboard-menu" id="#account">
        <nav class="accmenu">
        <a href="admindashboard.html"><i class="fa-solid fa-chart-pie"></i>Dashboard Overview</a>
        <a href="adminprofile.html"><i class="fa-regular fa-user"></i>Profile</a>
        <a href="adminmanagedata.html" class="active"> <i class="fa-regular fa-file"></i>Manage Data</a>
        <a href="adminsecurity.html"><i class="fa-solid fa-user-shield"></i>Security</a>
      </nav>
    </main>

     <aside class="upload-section" id="#resume">
    <section class="upload-card">
      <div class="head-text">
      <h2>Resume Management</h2>
      <p>Manage your resume</p>
    </div>
        <div class="upload-box">
          <div class="upload-content">
            <i class="fa-regular fa-file"></i>
          <h3>Upload Your Resume</h3>
          <p>PDF file only (Max 10MB)</p>
          <input type="file" id="resumeInput" accept=".pdf,.doc,.docx" style="display:none;">
          <button id="chooseBtn">Choose File</button>
        </div>
        <div class="current-resume">
          <span>No file uploaded</span>
          <div class="button">
            <button class="view-btn">View</button>
            <button class="download-btn">Download</button>
            <a id="downloadLink" style="display:none;"></a>
            <button class="delete-btn">Delete</button>
          </div>
        </div>
      </div>
        <!-- Resume Preview Modal -->

<div id="previewModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <iframe id="filePreview" src="" frameborder="0"></iframe>
  </div>
</div>

        </section>

  <script>
  const fileInput = document.getElementById('resumeInput');
  const chooseBtn = document.getElementById('chooseBtn');
  const resumeName = document.querySelector('.current-resume span');
  const downloadLink = document.getElementById('downloadLink');

  let fileURL = null;

  // Choose file button
  chooseBtn.addEventListener('click', () => {
    fileInput.click();
  });

  // When a file is uploaded
  fileInput.addEventListener('change', () => {
    if (fileInput.files.length > 0) {
      const file = fileInput.files[0];
      resumeName.textContent = file.name;

      fileURL = URL.createObjectURL(file);

      downloadLink.href = fileURL;
      downloadLink.download = file.name;
    }
  });

  // VIEW (open inside modal instead of downloading)
  document.querySelector('.view-btn').addEventListener('click', () => {
    if (!fileURL) return alert('No file to view');

    const modal = document.getElementById('previewModal');
    const filePreview = document.getElementById('filePreview');

    filePreview.src = fileURL;   // load file in iframe
    modal.style.display = 'flex';
  });

  // DOWNLOAD button
  document.querySelector('.download-btn').addEventListener('click', () => {
    if (!fileURL) return alert('No file to download');
    downloadLink.click();
  });

  // DELETE resume
  document.querySelector('.delete-btn').addEventListener('click', () => {
    const confirmDelete = confirm('Are you sure you want to delete this resume?');
    if (confirmDelete) {
      resumeName.textContent = 'No file uploaded';
      fileInput.value = '';
      fileURL = null;
      downloadLink.removeAttribute('href');
      downloadLink.removeAttribute('download');
    }
  });
</script>
<script>
  const modal = document.getElementById('previewModal');
  const filePreview = document.getElementById('filePreview');
  const closeBtn = document.querySelector('.modal .close');

  closeBtn.addEventListener('click', () => {
    modal.style.display = 'none';
    filePreview.src = "";
  });

  window.addEventListener('click', (e) => {
    if (e.target === modal) {
      modal.style.display = 'none';
      filePreview.src = "";
    }
  });
</script>

  
</body>
</html>
